!function(t){"use strict";var p={init:function(){p.clickNavigationButtonScripts(),p.onChangeInputScripts(),p.attributeViewMoreAndLessScript(),p.wizardShowResult()},load:function(){t(document).on("click",".wpfp-wizard-list-restart-button",function(t){var p=jQuery(this).attr("data-title");if(!confirm(p))return!1;setTimeout(function(){location.reload()},1e3)})},attributeViewMoreAndLessScript:function(){t(document).on("click",".wpfp_more",function(p){var i=t(this).closest("div.wpfp").attr("id"),e=t.trim(t(this).attr("id").substr(t(this).attr("id").lastIndexOf("-")+1)),a=t("#"+i+" #wpfp_product_"+e),o=t("#"+i+" #wpfp-more-id-"+e),r=a.find(".wpfp-product-body div.wpfp-product-attribute:hidden").length;a.find(".wpfp-product-body div.wpfp-product-attribute:hidden").slice(0,r).slideDown(),0===r&&o.fadeOut("slow"),t("#"+i+" #wpfp-less-id-"+e).show(),o.hide()}),t(document).on("click",".wpfp_less",function(p){var i,e=t(this).closest("div.wpfp").attr("id"),a=t.trim(t(this).attr("id").substr(t(this).attr("id").lastIndexOf("-")+1)),o=t("#"+e+" #wpfp_product_"+a),r=t("#"+e+" #wpfp-less-id-"+a),s=o.find(".wpfp-product-body div.wpfp-product-attribute:visible").length,d=t(this).attr("data-attributes-default");s>d&&(i=+(s-t.trim(+d+1))+1,o.find(".wpfp-product-body .wpfp-product-overlay-attributes").find(".wpfp-product-attribute:gt(-"+(+i+1)+")").slideUp()),t("#"+e+"  #wpfp-more-id-"+a).show(),r.hide()})},viewMoreAttributeSCript:function(p,i=3){t("#"+p+" .wpfp-product-section .wpfp-product-attribute").each(function(){"wpfp-product-attribute"===t.trim(t(this).attr("class"))&&t(this).addClass("wpfp-product-neutral-attributes")}),t("#"+p+" .wpfp-product-section").each(function(){var e,a=t.trim(t(this).attr("id").substr(t(this).attr("id").lastIndexOf("_")+1)),o=t("#"+p+" #wpfp_product_"+a),r=t("#"+p+" #wpfp_product_"+a+" .wpfp-product-overlay-attributes"),s=o.find("div.wpfp-product-negative-attribute").sort(u),d=o.find("div.wpfp-product-neutral-attributes").sort(u),n=i;function u(t,p){return t.className<p.className}s.appendTo(r),d.appendTo(r),o.each(function(){(e=t(this).find(".wpfp-product-body .wpfp-product-attributes-list .wpfp-product-overlay-attributes").find(".wpfp-product-attribute").length)>n?(t("#"+p+" #wpfp-more-id-"+a).show(),t(this).find(".wpfp-product-body .wpfp-product-attributes-list .wpfp-product-overlay-attributes .wpfp-product-attribute:lt("+e+")").show(),t(this).find(".wpfp-product-body .wpfp-product-attributes-list .wpfp-product-overlay-attributes .wpfp-product-attribute:gt("+(n-1)+")").hide()):(t(this).find(".wpfp-product-body .wpfp-product-attributes-list .wpfp-product-overlay-attributes").find(".wpfp-product-attribute").show(),t("#"+p+" #wpfp-more-id-"+a).hide()),t(".wpfp_less").hide()})})},clickNavigationButtonScripts:function(){t(document).on("click",".wpfp-button-next",function(p){var i,e,a=t(this).attr("data-wizard-id"),o=t(this).closest("div.wpfp").attr("id"),r=t("#"+o+" .wpfp-wizard-"+a),s=r.find(".wpfp-next").attr("id");p.preventDefault(),r.find(".wpfp-questions li").removeClass("wpfp-current").removeClass("wpfp-next").removeClass("wpfp-previous"),r.find("#"+s).prev().removeClass("wpfp-current").addClass("wpfp-previous"),r.find("#"+s).next().addClass("wpfp-next"),r.find("#"+s).removeClass("wpfp-next").addClass("wpfp-current"),t("#"+o+" .wpfp-button-previous").prop("disabled",!1),r.find(".wpfp-questions li").hasClass("wpfp-next")||(t("#"+o+" .wpfp-button-next").prop("disabled",!0).hide(),e=!0,t("#"+o+" .wpfp-option-action input:checked").each(function(t){e=!1}),!1===e?t("#"+o+" .wpfp-button-show-result").show().prop("disabled",!1):t("#"+o+" .wpfp-button-show-result").show().prop("disabled",!0)),i=t("#"+o+" .wpfp-step-wrapper .wpfp-step.active").attr("id"),t("#"+o+" .wpfp-step-wrapper .wpfp-step").removeClass("active"),t("#"+o+" #"+i).next().addClass("active")}),t(document).on("click",".wpfp-button-previous",function(p){var i,e=t(this).attr("data-wizard-id"),a=t(this).closest("div.wpfp").attr("id"),o=t("#"+a+" .wpfp-wizard-"+e),r=o.find(".wpfp-previous").attr("id");p.preventDefault(),o.find(".wpfp-questions li").removeClass("wpfp-current").removeClass("wpfp-previous").removeClass("wpfp-next"),o.find("#"+r).prev().removeClass("wpfp-current").addClass("wpfp-previous"),o.find("#"+r).next().addClass("wpfp-next"),o.find("#"+r).removeClass("wpfp-previous").addClass("wpfp-current"),t("#"+a+" .wpfp-button-next").show().prop("disabled",!1),t("#"+a+" .wpfp-button-show-result").hide().prop("disabled",!0),o.find(".wpfp-questions li").hasClass("wpfp-previous")||t("#"+a+" .wpfp-button-previous").prop("disabled",!0),i=t("#"+a+" .wpfp-step-wrapper .wpfp-step.active").attr("id"),t("#"+a+" .wpfp-step-wrapper .wpfp-step").removeClass("active"),t("#"+a+" #"+i).prev().addClass("active")})},checkboxWizardOption:function(p,i,e){var a,o=t("#"+e+" .wpfp_wizard_selected_option_"+p.data("question-key")),r=o.val(),s={};p.attr("checked")?(s[p.attr("id")]=i,""!==r?(a=(r=JSON.parse(r)).checkbox,r={checkbox:t.extend(s,a)}):r={checkbox:s}):delete(r=JSON.parse(r)).checkbox[p.attr("id")],t.isEmptyObject(r.checkbox)&&(r=""),o.val(JSON.stringify(r))},selectionWizardOption:function(p,i,e){var a=t("#"+e+" #wpfp_wizard_options_selected"),o=a.val();""===o?(o={})[p.data("question-key")]=i:(o=JSON.parse(o))[p.data("question-key")]=i,a.val(JSON.stringify(o))},onChangeInputScripts:function(){t(document).on("change",".wpfp-input-option",function(){var i,e,a=t(this).closest("div.wpfp").attr("id"),o=t("#"+a+" .wpfp-button-next"),r={questionKey:t(this).data("question-key"),optionKey:t(this).data("id"),attributeName:t(this).data("attribute-name"),attributeNameDB:t(this).data("attribute-name-db"),attributeValue:t(this).data("attribute-value")};(o.prop("disabled")||void 0===o.prop("disabled"))&&(e=!0,t("#"+a+" .wpfp-option-action input:checked").each(function(t){e=!1}),!1===e?t("#"+a+" .wpfp-button-show-result").show().prop("disabled",!1):t("#"+a+" .wpfp-button-show-result").show().prop("disabled",!0)),"checkbox"===t(this).attr("type")&&(p.checkboxWizardOption(t(this),r,a),i=t("#"+a+" .wpfp_wizard_selected_option_"+t(this).data("question-key")).val(),r=JSON.parse(i)),p.selectionWizardOption(t(this),r,a),"yes"!==wpfpPublicScriptObj.wpfp_result_display_mode&&p.wizardAjaxCall(t(this),a)})},wizardAjaxCall:function(i,e){var a={action:"wpfp_get_ajax_product_list",wizardID:i.data("wizard-id"),wizardSelectedOptions:t("#"+e+" #wpfp_wizard_options_selected").val(),wizardCategoriesIDs:t("#"+e+" #wpfp_wizard_categories_ids").val(),optionKey:i.data("id"),security:i.data("nonce")};t.ajax({type:"GET",url:wpfpPublicScriptObj.wpfp_ajax_url,data:a,beforeSend:function(){t("#"+e).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){t("#"+e).unblock()},success:function(i){var a=t.parseJSON(i);1===a.success?(t("#"+e+" .wpfp-product-list").html(a.html),p.viewMoreAttributeSCript(e,a.showAttributeCount),p.wpfpWizardProductPagination(e)):t("#"+e+" .wpfp-product-list").empty()}})},wpfpWizardProductPagination:function(i){t(document).on("click","#"+i+" .wpfp-match-pagination a.page-numbers",function(e){var a,o=t(this).parent().data("identity");e.preventDefault(),a={action:"wpfp_ajax_product_pagination",wizardID:t(this).data("wizard-id"),wizardSelectedOptions:t("#"+i+" #wpfp_wizard_options_selected").val(),wizardCategoriesIDs:t("#"+i+" #wpfp_wizard_categories_ids").val(),optionKey:t(this).data("id"),security:t(this).parent().data("nonce"),pageNumber:t(this).data("page-number"),wizardIdentity:o},t.ajax({type:"GET",url:wpfpPublicScriptObj.wpfp_ajax_url,data:a,beforeSend:function(){t("#"+i).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){t("#"+i).unblock()},success:function(e){var a=t.parseJSON(e);1===a.success?(t("#"+i+" .wpfp-product-"+o).html(a.html),p.viewMoreAttributeSCript(i,a.showAttributeCount)):t("#"+i+" .wpfp-product-list").empty()}})})},wizardShowResult:function(){t(".wpfp-button-show-result").on("click",function(i){var e=t(this).closest("div.wpfp").attr("id");"yes"===wpfpPublicScriptObj.wpfp_result_display_mode&&p.wizardAjaxCall(t(this),e),t("body").hasClass("logged-in")?t("html, body").animate({scrollTop:t("#"+e+" .wpfp-product-list").offset().top-30},1e3):t("html, body").animate({scrollTop:t("#"+e+" .wpfp-product-list").offset().top},1e3)})}};t(document).ready(p.init),t(window).on({load:p.load,resize:p.resize,scroll:p.scroll})}(jQuery,window,document);